<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<div id="top-div" th:fragment="content">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배팅 페이지</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/betting-page/swich.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-active.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-body.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-graph.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-side.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-modal.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-title.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/betting-respon.css}" media="screen and (max-width: 760px)">

</head>
<body>
<div class="html-container">
    <div class="body-container">
        <div class="main-container">
            <div class="betting-warning-container">
                <p class="betting-warning hidden">이 게임은 사용자가 만든 게임입니다. 승패에 관해서 운영진은 책임지지 않습니다!</p>
            </div>
            <div class="title-content">
                <img th:src="${subjectImage}" alt="배팅 이미지" onerror="this.onerror=null;this.src='me.jpg';">
                <div class="title_text-content">
                    <ul class="title_desktop">
                        <li>$&nbsp<span th:text="${subject.getSubjectTotalYesPoint()+subject.getSubjectTotalNoPoint()}"></span>&nbspPoint</li>
                        <li><span id="title-schedule-icon" class="material-symbols-outlined">schedule</span><span th:text="${subject.subjectRegisterTimestamp.toString().split(' ')[0]}"></span></li>
                        <li>~</li>
                        <li th:text="${subject.getSubjectSettlementTimestamp().toString()}"></li>
                        <li class="response-title-off" id="betting-state" th:text="${subject.subjectStatus}"></li>
                        <li class="response-title-off" th:text="${userAuthority}" style="display: none"></li>
                    </ul>
                    <ul class="title_mobile" style="display: none">
                        <li>$&nbsp<span th:text="${subject.getSubjectTotalYesPoint()+subject.getSubjectTotalNoPoint()}"></span>&nbspPoint</li>
                        <li th:text="${subject.getSubjectSettlementTimestamp().toString()}"></li>
                    </ul>
                    <ul class="title_mobile" style="display: none">
                        <li class="response-title-off" id="betting-state3" th:text="${subject.subjectStatus}"></li>
                        <li class="response-title-off" th:text="${userAuthority}" style="display: none"></li>
                    </ul>
                    <ul>
                        <li><button class="accountBtn"
                                    th:text="'정산하기'"
                                    th:style="${(isAccountBtnOn&&(subject.subjectFinishResult==null)) ? 'display:block;' : 'display:none;'}"
                                    id="openModalBtn"
                                    th:classappend="${hideButton} ? 'hideButton' : ''"
                        >aaa</button></li>
                        <li id="finishResult"
                            th:text="${subject.subjectFinishResult} + ' 승리'"
                            th:style="${(subject.subjectFinishResult != null) ? 'display:block;' : 'display:none;'}">
                        </li>
                    </ul>
                    <h2 th:text="${subject.subjectTitle}"></h2>
                </div>
            </div>
            <div class="graph-container">
                <div class="graph_percent-content">
                    <p id="graph_percent-content-yesno">YES</p>
                    <p id="graph_percent-content-yesno_percent" th:text="${returnYRate}"></p>
                </div>
                <div class="graph_canvas-content">
<!--                    <canvas id="line-chart" width="770vw"></canvas>-->
                    <canvas id="line-chart"></canvas>
                </div>

                <div class="popup_setting-content" style="display: none;">
                    <md-elevation></md-elevation>
                    <p id="popup-title">Chart Settings<span id="popup-cancle" onclick="popupCancle()"
                                                            class="material-symbols-outlined">close</span></p>
                    <p>YES<label class="switch">
                        <input id="yes-Switch"  type="checkbox" checked="checked" onchange="updateChart()">
                        <span class="slider round"></span>
                    </label></p>
                    <p>NO<label class="switch">
                        <input id="no-Switch" type="checkbox" checked="checked" onchange="updateChart()">
                        <span class="slider round"></span>
                    </label></p>

                </div>
                <div class="graph_setting-container">
                    <div class="graph_setting_time-content">
                        <ul>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=0 slot="selected">1H
                                </md-text-button>
                            </li>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=1>6H
                                </md-text-button>
                            </li>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=2>1D
                                </md-text-button>
                            </li>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=3>1W
                                </md-text-button>
                            </li>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=4>1M
                                </md-text-button>
                            </li>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=5>ALL
                                </md-text-button>
                            </li>
                        </ul>
                    </div>
                    <div class="graph_setting-content">
                        <md-icon-button onclick="changeSetting()">
                           <span class="material-symbols-outlined">cached</span>
                        </md-icon-button>
                        <md-icon-button onclick="graphSetting()">
                            <span class="material-symbols-outlined">settings</span>
                        </md-icon-button>
                    </div>
                </div>
            </div>

            <!--        <div class="depth-container">-->

            <!--        </div>-->


            <div class="user_activity-container">
                <div class="user_active-content-btns">
                    <ul>
                        <li>
                            <button class="user-activity-button" th:onclick="'userActivityComment(this.value)'"
                                    th:value="0">댓글
                            </button>
                        </li>
                        <li>
                            <button class="user-activity-button" th:onclick="'userActivityRanking(this.value)'"
                                    th:value="1">순위
                            </button>
                        </li>
                        <li>
                            <button class="user-activity-button" th:onclick="'userActivityActive(this.value)'"
                                    th:value="2">활동내역
                            </button>
                        </li>
                    </ul>
                </div>
                <div class="user_active-content" id="user_active-content">

                </div>
            </div>

        </div>
        <div class="side-container">
            <div class="side_title-content">
                <ul>
                    <li class="buy-item">
                        <button onclick="sideSelectBuy()">구매</button>
                    </li>
                    <li class="sell-item">
                        <button onclick="sideSelectSell()">판매</button>
                    </li>
                    <li  id="side-cancle">
                        <span onclick="sideCancle()"
                              class="material-symbols-outlined">close</span>
                    </li>
                </ul>
            </div>
            <div class="side_main-container">
                <div class="side_buy-content">

                </div>
            </div>
        </div>
    </div>
</div>
<div class="batting_modal-container" style="display: none;">

</div>
<div id="myModal" class="modal" >
    <div class="modal-content">
        <span class="close">&times;</span>
        <p>승리 결과를 선택해주세요</p>
        <button id="yesBtn">Yes</button>
        <button id="noBtn">No</button>
    </div>
</div>

<div class="buy-mobile-content">
    <button onclick="sideOpen()">구매하기</button>
</div>
<input type="hidden" id="userPoint" th:value="${userPoint}">
<input type="hidden" id="loggedSubjectNo" th:value="${subject.getSubjectNo()}"/>

<input type="hidden" id="subjectNo" th:value="${subject.getSubjectNo()}"/>

<input type="hidden" id="loggedInUserId" th:value="${loggedInUserId}" />
<input type="hidden" id="sumYPoint" th:value="${sumYPoint}">
<input type="hidden" id="sumNPoint" th:value="${sumNPoint}">
<input type="hidden" id="subjectRegisterUserNo" th:value="${subject.subjectRegisterUserNo}"/>
</body>
<script type="text/javascript" th:src="@{/js/betting-page/betting-page-js.js}"></script>
</div>
</html>

