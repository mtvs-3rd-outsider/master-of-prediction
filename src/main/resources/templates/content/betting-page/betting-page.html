<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배팅 페이지</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="importmap">
        {
          "imports": {
            "@material/web/": "https://esm.run/@material/web/"
          }
        }
    </script>
    <script type="module">
        import '@material/web/all.js';
        import {styles as typescaleStyles} from '@material/web/typography/md-typescale-styles.js';

        document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
    </script>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/betting-page/swich.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-active.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-body.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-graph.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-side.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-modal.css}"/>
    <link rel="stylesheet" th:href="@{/css/betting-page/batting-title.css}"/>
</head>
<body>
<header th:replace="~{fragments/header :: content}">Header</header>
<div class="html-container">
    <div class="body-container">
        <div class="main-container">
            <div class="betting-warning-container">
                <p class="betting-warning hidden">이 게임은 사용자가 만든 게임입니다. 승패에 관해서 운영진은 책임지지 않습니다!</p>
            </div>
            <div class="title-content">
                <img th:src="'/images/upload/' + ${subjectImage}" alt="배팅 이미지" onerror="this.onerror=null;this.src='me.jpg';">
                <div class="title_text-content">
                    <ul>
                        <li>$&nbsp<span th:text="${subject.getSubjectTotalYesPoint()+subject.getSubjectTotalNoPoint()}"></span>&nbspPoint</li>
                        <li><span id="title-schedule-icon" class="material-symbols-outlined">schedule</span><span th:text="${subject.subjectRegisterTimestamp.toString().split(' ')[0]}"></span></li>
                        <li>~</li>
                        <li th:text="${subject.getSubjectSettlementTimestamp().toString().split(' ')[0]}"></li>
                        <li id="betting-state" th:text="${subject.subjectStatus}"></li>
                        <li th:text="${userAuthority}"></li>
                        <li><button class="accountBtn" th:text="'정산하기'" th:style="${isAccountBtnOn ? 'display:block;' : 'display:none;'}">aaa</button></li>
                    </ul>
                    <h2 th:text="${subject.subjectTitle}"></h2>
                </div>
            </div>
            <div class="graph-container">
                <div class="graph_percent-content">
                    <p id="graph_percent-content-yesno">YES</p>
                    <p id="graph_percent-content-yesno_percent" th:text="${returnYRate}"></p>
                </div>
                <div class="graph_canvas-content">
                    <canvas id="line-chart" width="770vw"></canvas>
                </div>

                <div class="popup_setting-content">
                    <md-elevation></md-elevation>
                    <p id="popup-title">Chart Settings<span id="popup-cancle" onclick="popupCancle()"
                                                            class="material-symbols-outlined">close</span></p>
                    <p>YES<label class="switch">
                        <input type="checkbox">
                        <span class="slider round"></span>
                    </label></p>
                    <p>NO<label class="switch">
                        <input type="checkbox">
                        <span class="slider round"></span>
                    </label></p>

                </div>
                <div class="graph_setting-container">
                    <div class="graph_setting_time-content">
                        <ul>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=0 slot="selected">1H
                                </md-text-button>
                            </li>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=1>6H
                                </md-text-button>
                            </li>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=2>1D
                                </md-text-button>
                            </li>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=3>1W
                                </md-text-button>
                            </li>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=4>1M
                                </md-text-button>
                            </li>
                            <li>
                                <md-text-button class="graph_setting-content-button"
                                                onclick="graphSettingButton(this.value)"
                                                value=5>ALL
                                </md-text-button>
                            </li>
                        </ul>
                    </div>
                    <div class="graph_setting-content">
                        <md-icon-button onclick="graphSetting()">
                           <span class="material-symbols-outlined">cached</span>
                        </md-icon-button>
                        <md-icon-button onclick="graphSetting()">
                            <span class="material-symbols-outlined">settings</span>
                        </md-icon-button>
                    </div>
                </div>
            </div>

            <!--        <div class="depth-container">-->

            <!--        </div>-->


            <div class="user_activity-container">
                <div class="user_active-content-btns">
                    <ul>
                        <li>
                            <button class="user-activity-button" th:onclick="'userActivityComment(this.value)'"
                                    th:value="0">댓글
                            </button>
                        </li>
                        <li>
                            <button class="user-activity-button" th:onclick="'userActivityRanking(this.value)'"
                                    th:value="1">순위
                            </button>
                        </li>
                        <li>
                            <button class="user-activity-button" th:onclick="'userActivityActive(this.value)'"
                                    th:value="2">활동내역
                            </button>
                        </li>
                    </ul>
                </div>
                <div class="user_active-content" id="user_active-content">

                </div>
            </div>

        </div>
        <div class="side-container">
            <div class="side_title-content">
                <ul>
                    <li class="buy-item">
                        <button onclick="sideSelectBuy()">구매</button>
                    </li>
                    <li class="sell-item">
                        <button onclick="sideSelectSell()">판매</button>
                    </li>
                </ul>
            </div>
            <div class="side_main-container">
                <div class="side_buy-content">

                </div>
            </div>
        </div>
    </div>
</div>
<div class="batting_modal-container">
    <div class="buy_modal-content">
        <p class="modal-title">제목</p>
        <p><span>yes</span>를 선택하셨습니다.</p>
        <p><span>310p</span>를 소모해여 <span>구매</span>하시겠습니까?</p>
        <div class="modal-btns">
            <button class="modal-btns-buy">구매</button>
            <button class="modal-btns-cancel" onclick="battingModalCancle()">취소</button>
        </div>
    </div>
</div>
<input type="hidden" id="subjectNo" th:value="${subject.getSubjectNo()}"/>
<input type="hidden" id="loggedInUserId" th:value="${loggedInUserId}" />
<input type="hidden" id="sumYPoint" th:value="${sumYPoint}">
<input type="hidden" id="sumNPoint" th:value="${sumNPoint}">
<input type="hidden" id="subjectRegisterUserNo" th:value="${subject.subjectRegisterUserNo}"/>
</body>
<script type="text/javascript" th:src="@{/js/betting-page/betting-page-js.js}"></script>
</html>