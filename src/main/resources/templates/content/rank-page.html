<html xmlns:th="http://www.thymeleaf.org">
<div class="main-content" th:fragment="content">
    <link rel="stylesheet" th:href="@{/css/rank-page/rankpage.css}" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <div class="rank-main">
        <div class="rank-title">
            <div>
                <span><i class="fa-solid fa-crown" style="color: #FFD43B;"></i></span>
                <span>Top Rankings</span>
            </div>
        </div>
        <div class="rank-notice">랭킹은 매일 자정에 초기화됩니다!</div>

        <div th:each="user, userStat : ${userRank}" class="rank-content">
            <div class="rank-content-box">
                <div class="rank-user-info">
                    <div class="rank-user-ranking">
                        <span th:text="${userStat.count}"></span>
                    </div>
                    <a class="rank-user-image" th:href="@{/mypage/{userNo}(userNo=${user.userNo})}">
                        <img th:src="${user.attachment.attachmentFileAddress}">
                    </a>
                    <div class="rank-user-name">
                        <span th:text="${user.userName}"></span>
                    </div>
                </div>
                <div class="rank-user-point">
                    <span class="rank-page-user-point" th:text="${user.userPoint}"></span>
                </div>
            </div>
        </div>
    </div>

    <script>
        function formatPoints(points) {
            if (points >= 1e18) {
                return (points / 1e18).toFixed(1) + 'P';
            } else if (points >= 1e12) {
                return (points / 1e12).toFixed(1) + 'T';
            } else if (points >= 1e9) {
                return (points / 1e9).toFixed(1) + 'G';
            } else if (points >= 1e6) {
                return (points / 1e6).toFixed(1) + 'M';
            } else if (points >= 1e3) {
                return (points / 1e3).toFixed(1) + 'K';
            } else {
                return points.toString();
            }
        }

        document.addEventListener("DOMContentLoaded", function() {
            const pointElements = document.getElementsByClassName('rank-page-user-point');
            for (let i = 0; i < pointElements.length; i++) {
                const points = parseInt(pointElements[i].textContent.trim());
                pointElements[i].textContent = formatPoints(points);
            }
        });
    </script>
</div>
</html>

