<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <link rel="manifest" th:href="@{/manifest.json}" />
    <base th:href="@{/}">
    <link
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
            rel="stylesheet"
    />
    <script type="importmap">
        {
          "imports": {
            "@material/web/": "https://esm.run/@material/web/"
          }
        }
    </script>
    <script type="module">
        import "@material/web/all.js";
        import {styles as typescaleStyles} from "@material/web/typography/md-typescale-styles.js";

        document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
    </script>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title th:text="${title}">예측의 달인</title>
    <link rel="stylesheet" th:href="@{/css/main-page/mainpage.css}"/>
    <link
            href="https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined"
            rel="stylesheet"
    />
    <style>
        #DeskHeader, #MobileHeader {
            display: none;
        }
    </style>

    <script type="text/javascript" th:src="@{service-worker-register.js}"></script>
<!--    <script type="module">-->
<!--        import 'https://cdn.jsdelivr.net/npm/@pwabuilder/pwaupdate';-->
<!--        const el = document.createElement('pwa-update');-->
<!--        document.body.appendChild(el);-->
<!--    </script>-->
</head>
<body>

<header th:replace="~{fragments/header :: content}">Header</header>
<header th:replace="~{fragments/mobileHeader :: content}">Header</header>


<div th:replace="~{${view} :: content}">Right Content</div>
<div th:replace="~{fcm :: content}">Header</div>

<!-- 이곳 -->
<div   class="bottom-right-button-container">
    <div sec:authorize="isAuthenticated()" class="bounding-betting-add-page-entry">
        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="none"
             viewBox="0 0 24 24">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                  d="M10.779 17.779 4.36 19.918 6.5 13.5m4.279 4.279 8.364-8.643a3.027 3.027 0 0 0-2.14-5.165 3.03 3.03 0 0 0-2.14.886L6.5 13.5m4.279 4.279L6.499 13.5m2.14 2.14 6.213-6.504M12.75 7.04 17 11.28"/>
        </svg>
    </div>
    <div class="notification-page-entry">
        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="none"
             viewBox="0 0 24 24">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                  d="M7.556 8.5h8m-8 3.5H12m7.111-7H4.89a.896.896 0 0 0-.629.256.868.868 0 0 0-.26.619v9.25c0 .232.094.455.26.619A.896.896 0 0 0 4.89 16H9l3 4 3-4h4.111a.896.896 0 0 0 .629-.256.868.868 0 0 0 .26-.619v-9.25a.868.868 0 0 0-.26-.619.896.896 0 0 0-.63-.256Z"/>
        </svg>
    </div>
</div>
<!--<md-dialog type="alert" id='login-dialog'>-->
<!--        <div slot="headline">-->
<!--        <div class="headline">로그인</div>-->
<!--    </div>-->
<!--    <form slot="content" id="form-id3" method="dialog">-->
<!--        <div th:replace="~{content/login-page/login :: content}">Right Content</div>-->
<!--    </form>-->
<!--    <div slot="actions">-->
<!--        <div class="register-btn-group">-->
<!--            <md-text-button id="login-dialog-close-button" form="form-id2" value="cancel">취소</md-text-button>-->
<!--        </div>-->
<!--    </div>-->
<!--</md-dialog>-->
<script type="module">
    function updateHeader() {
        const width = window.innerWidth;
        const header1 = document.getElementById('DeskHeader');
        const header2 = document.getElementById('MobileHeader');
        if (width > 760) {
            // if (width < 300) {
            header1.style.display = 'block';
            header2.style.display = 'none';
        } else {
            header1.style.display = 'none';
            header2.style.display = 'block';
        }
    }


    // 페이지 로드 시와 창 크기 변경 시 업데이트 함수 호출
    window.addEventListener('load', updateHeader);
    window.addEventListener('resize', updateHeader);

    const BettingAddPageElement = document.querySelector(".bounding-betting-add-page-entry")
    BettingAddPageElement?.addEventListener("click", () => {
        location.href = "/bettingaddpage";
    })


    const NotificationPageEntry = document.querySelector(".notification-page-entry")
    NotificationPageEntry.addEventListener("click", () => {
        location.href = "/notification";
    })

    const checkoutPathname = () => {
        const pathname = window.location.pathname;
        if (pathname.includes("notification") || pathname.includes("bettingaddpage")) {
            BettingAddPageElement.classList.add("hidden")
        } else {
            if (BettingAddPageElement !== null){
                BettingAddPageElement.classList.remove("hidden")

            }
        }
    }

    window.addEventListener("load", checkoutPathname);
</script>
<script type="module">
    //TODO: signup dialog 비활성화
    // const signUpDialog = document.getElementById('sign-up-dialog');
    // const openSignUpDialogBtn = document.getElementById('open-sign-up-dialog-btn');
    // const signUpForm = signUpDialog.querySelector('form');
    // openSignUpDialogBtn.addEventListener('click', () => {
    //     console.log("등록 됨")
    //     signUpDialog.show(); // 다이얼로그를 엽니다.
    // });
    // const siginUpCloseButton = signUpDialog.querySelector('#inquiry-register-close-button');

    // siginUpCloseButton.addEventListener('click', () => {
    //     signUpForm.reportValidity()
    //     signUpDialog.close();
    //
    // });
    // const loginDialog = document.getElementById('login-dialog');
    // const openLoginDialogBtn = document.getElementById('open-login-dialog-btn');

    // const loginForm = loginDialog.querySelector('form');
    // openLoginDialogBtn.addEventListener('click', () => {
    //     console.log("등록 됨");
    //     loginDialog.show(); // 다이얼로그를 엽니다.
    // });
    // const openLoginDialogBtns = document.querySelectorAll('.open-login-dialog-btn');
    //
    // // 여러 개의 버튼에 대해 클릭 이벤트 리스너 추가
    // openLoginDialogBtns.forEach(btn => {
    //     btn.addEventListener('click', () => {
    //         console.log("등록 됨");
    //         loginDialog.show(); // 다이얼로그를 엽니다.
    //     });
    // });
    // const closeButton = loginDialog.querySelector('#login-dialog-close-button');

    // closeButton.addEventListener('click', () => {
    //     loginForm.reportValidity()
    //     loginDialog.close();
    //
    // });
</script>
</body>
</html>
